var FinancialPlan={propertyValue:2e5,newProperty:!1,firstProperty:!0,region:"brussels",walloniaDiscount:!1,ownFunds:5e4,durationYears:20,income:2e3,charges:0,annualRate:.033,get monthlyRate(){return(1+this.annualRate)**(1/12)-1},maxDebtRatio:.45,maxDurationYears:30,NAI:1e3,regionalFees:{brussels:.125,wallonia:.125,flanders:.1},notaryFixedCost:2178,discountValue:160353,VAT:.21,notaryMatrix:[[0,.0456,0],[7500,.0285,128.25],[17500,.0228,228],[3e4,.0171,399],[45495,.0114,658.3215],[64095,.0057,1023.663],[250095,57e-5,2306.65035]],mortgageMatrix:[[-1902.44,1.036259776191308,1971.4220486173917],[5335.127425000001,1.0318350094994342,1995.0287427444325],[15026.599325,1.0259937675598192,2082.8027449314154],[22312.32525,1.0259937675598192,2107.693353732415],[27185.6492,1.023097877144545,2186.4200146837047],[42330.82772705,1.0202182881494126,2308.3154003613545],[46722.289394,1.0202182881494126,2333.0658960318615],[60537.96018105,1.0173548633158815,2506.411794585595],[71232.673858,1.0173548633158815,2531.092823569648],[95781.943608,1.0173548633158815,2555.773852553686],[120331.213358,1.0173548633158815,2580.454881537739],[144880.48310800001,1.0173548633158815,2605.135910521762],[169429.752858,1.0173548633158815,2629.816939505815],[193979.022608,1.0173548633158815,2654.497968489867],[218528.292358,1.0173548633158815,2679.1789974738904],[243077.562108,1.0173548633158815,2703.860026457943],[243170.94152105,1.0150756703892165,3258.093516343205],[267681.7981892,1.0150756703892165,3282.7192521068273],[292286.2439392,1.0150756703892165,3307.344987870479],[316890.6896892,1.0150756703892165,3331.970723634131],[341495.1354392,1.0150756703892165,3356.596459397783],[366099.5811892,1.0150756703892165,3381.2221951614347],[390704.0269392,1.0150756703892165,3405.8479309250274],[415308.4726892,1.0150756703892165,3430.4736666886793],[439912.9184392,1.0150756703892165,3455.09940245239],[464517.3641892,1.0150756703892165,3479.725138215983],[488636.6149392,1.0160765253564337,3507.8061306480854]],monthlyPayment:0,notaryFixedFees:0,notaryVariableFees:0,notaryTotalFees:0,registrationInitialFees:0,registrationFeesDiscount:0,registrationDiscountedFees:0,totalAcquisitionCost:0,loanAmount:15e4,mortgageFixedFees:0,mortgageVariableFees:0,mortgageTotalFees:0,totalAmountWithMortgage:0,repaymentSchedule:[],getStaircaseRow:function(t,e){if(t[0][0]>e)return 0;for(var a=0;a<t.length;a++){if(t[a][0]-e>0)return a-1;if(e>=t[t.length-1][0])return t.length-1}},getPMT:function(t=this.monthlyRate,e=12*this.durationYears,a=-this.loanAmount,i=0,r=0){var o,s;return i||(i=0),r||(r=0),0===t?-(a+i)/e:(o=-t*a*((s=Math.pow(1+t,e))+i)/(s-1),1===r&&(o/=1+t),o)},calcNotaryFeesHC(){let t=this.notaryMatrix[this.getStaircaseRow(this.notaryMatrix,this.propertyValue)][1]*(1+this.VAT);this.notaryFixedFees=this.notaryMatrix[this.getStaircaseRow(this.notaryMatrix,this.propertyValue)][2]*(1+this.VAT)+this.notaryFixedCost,this.notaryVariableFees=t*this.propertyValue,this.notaryTotalFees=this.notaryFixedFees+this.notaryVariableFees},calcRegistrationFeesHC(){let t=0;"brussels"==this.region&&this.firstProperty&&this.propertyValue<=5e5?t=Math.min(this.propertyValue,175e3):"flanders"==this.region&&this.firstProperty&&this.propertyValue<=2e5?t=Math.min(this.propertyValue,8e4):"wallonia"==this.region&&this.firstProperty&&(t=Math.min(this.propertyValue,2e4)),this.registrationInitialFees=this.propertyValue*this.regionalFees[this.region],"flanders"==this.region&&this.firstProperty?this.registrationDiscountedFees=.06*(this.propertyValue-t):"wallonia"==this.region&&this.walloniaDiscount?this.registrationDiscountedFees=.06*Math.min(this.propertyValue-t,this.discountValue)+Math.max(this.propertyValue-t-this.discountValue,0)*this.regionalFees[this.region]:this.registrationDiscountedFees=(this.propertyValue-t)*this.regionalFees[this.region],this.registrationFeesDiscount=this.registrationInitialFees-this.registrationDiscountedFees},calcMortgageFeesHC(){this.loanAmount=this.propertyValue+this.notaryTotalFees+this.registrationDiscountedFees-this.ownFunds,this.mortgageFixedFees=this.mortgageMatrix[this.getStaircaseRow(this.mortgageMatrix,this.loanAmount)][2],this.mortgageVariableFees=this.mortgageMatrix[this.getStaircaseRow(this.mortgageMatrix,this.loanAmount)][1]*this.loanAmount-this.loanAmount,this.mortgageTotalFees=this.mortgageFixedFees+this.mortgageVariableFees},calcPurchaseDeedFees(){let t=this.firstProperty,e=this.propertyValue,a=e,i=0;if("brussels"==this.region&&t&&this.propertyValue<=5e5?a-=Math.min(this.propertyValue,175e3):"flanders"==this.region&&t&&this.propertyValue<=2e5?a-=Math.min(this.propertyValue,8e4):"wallonia"==this.region&&t&&(a-=Math.min(this.propertyValue,2e4)),"wallonia"==this.region&&this.walloniaDiscount){let t;t=163125.56,i+=.06*Math.min(t,a),a-=Math.min(t,a)}"brussels"==this.region?i+=.125*a:"flanders"==this.region?i+=t?.03*a:.12*a:"wallonia"==this.region&&(i+=.125*a);var r=[[0,.0456,0],[7500,.0285,342],[17500,.0228,627],[3e4,.0171,912],[45495,.0114,1176.9645],[64095,.0057,1389.0045],[250095,57e-5,2449.2045]];let o=r[this.getStaircaseRow(r,e)][1],s=e-r[this.getStaircaseRow(r,e)][0],n=r[this.getStaircaseRow(r,e)][2],l=Math.round(100*(o*s+n+Number.EPSILON))/100,h=Math.max(800,1100),u=Math.round(100*(.21*(l+h)+Number.EPSILON))/100;return{amount:Math.round(100*(i+l+h+u+230+Number.EPSILON))/100,localeFR:"Frais de notaire d’acte d’achat",localeNL:"Aankoopkosten",registrationFee:{amount:Math.round(100*(i+Number.EPSILON))/100,localeFR:"Frais d’enregistrement",localeNL:"Registratiebelasting/rechten"},notaryFee:{amount:l,localeFR:"Honoraires",localeNL:"Ereloon"},administrativeFee:{amount:h,localeFR:"Frais administratifs",localeNL:"Administratieve kosten"},transcription:{amount:230,localeFR:"Transcription hypothécaire",localeNL:"Kosten overschrijving"},vat:{amount:u,localeFR:"TVA",localeNL:"BTW"}}},calcMortgageDeedFees(t=this.loanAmount){let e=1.1*t;var a=e<3e5?230:950,i=[[0,.0171,0],[7500,.01368,128.25],[17500,.00912,265.05],[3e4,.00684,379.05],[45495,.00456,485.0358],[64095,.00228,569.8518],[250095,456e-6,993.9318]];let r=i[this.getStaircaseRow(i,e)][1],o=e-i[this.getStaircaseRow(i,e)][0],s=i[this.getStaircaseRow(i,e)][2],n=Math.round(100*(r*o+s+Number.EPSILON))/100,l=Math.max(700,1e3),h=Math.round(100*(.21*(n+l+50)+Number.EPSILON))/100;return{amount:Math.round(100*(.01*e+100+50+.003*e+a+n+l+h+Number.EPSILON))/100,localeFR:"Frais d’acte de crédit hypothécaire",localeNL:"Kosten voor standaardkrediet",registrationTax:{amount:Math.round(100*(.01*e+Number.EPSILON))/100,localeFR:"Droits d’enregistrement",localeNL:"Registratiebelasting/rechten"},appendixRight:{amount:100,localeFR:"Droit pour les annexes",localeNL:"Forfait registratie bijlage(n)"},writingRight:{amount:50,localeFR:"Droit d'écriture",localeNL:"Recht op geschriften"},mortgageRegistrationRight:{amount:Math.round(100*(.003*e+Number.EPSILON))/100,localeFR:"Frais d'hypothèque - Droit d'hypothèque",localeNL:"Hypotheekkosten - Hypotheekrecht"},retribution:{amount:a,localeFR:"Frais d'hypothèque - Rétribution",localeNL:"Hypotheekkosten - Retributie"},notaryFee:{amount:n,localeFR:"Honoraires",localeNL:"Ereloon"},administrativeFee:{amount:l,localeFR:"Frais administratifs",localeNL:"Administratieve kosten"},VAT:{amount:h,localeFR:"TVA",localeNL:"BTW"}}},getScheduleMonthly(){this.monthlyPayment=Math.round(100*(this.getPMT()+Number.EPSILON))/100;let t=[],e=12*this.durationYears;t[0]={payment:0,principalPayment:0,principalCumulative:0,interestPayment:0,interestCumulative:0,balance:this.loanAmount};for(let a=1;a<=e;a++){let i=Math.round(100*(t[a-1].balance*this.monthlyRate+Number.EPSILON))/100,r=a==e?Math.round(100*(t[a-1].balance*(1+this.monthlyRate)+Number.EPSILON))/100:this.monthlyPayment,o=Math.round(100*(r-i+Number.EPSILON))/100;t[a]={payment:r,principalPayment:o,principalCumulative:Math.round(100*(t[a-1].principalCumulative+o+Number.EPSILON))/100,interestPayment:i,interestCumulative:Math.round(100*(t[a-1].interestCumulative+i+Number.EPSILON))/100,balance:Math.round(100*(t[a-1].balance-o+Number.EPSILON))/100}}return this.repaymentSchedule=t,t},getScheduleYearly(){let t=this.getScheduleMonthly()||[],e=[];e[0]={balance:t[0].balance,interest:0,principal:0};for(let a=1;a<=t.length;a++)a%12==0&&0!==a&&(e[a/12]={interest:t[a].interestCumulative,principal:t[a].principalCumulative,balance:t[a].balance});return e},getAcquisitionCost(t){null!=t&&(this.newProperty=t),this.ownFunds=this.ownFunds||0;let e=this.calcPurchaseDeedFees().amount,a=this.calcMortgageDeedFees(this.propertyValue+e-this.ownFunds).amount;return this.newProperty?this.totalAmountWithMortgage=this.propertyValue+e+a+this.propertyValue*this.VAT:this.totalAmountWithMortgage=this.propertyValue+e+a,this.loanAmount=this.totalAmountWithMortgage-this.ownFunds,Math.round(100*(this.totalAmountWithMortgage+Number.EPSILON))/100},getMaxLoan(t){this.monthlyPayment=null!=t?t:Math.max(Math.min(this.income*this.maxDebtRatio-this.charges,this.income-this.NAI),0);let e=[];for(let t=0;t<this.maxDurationYears;t++)if(this.income-this.charges-this.monthlyPayment<this.NAI)e[t]=0;else{let a=this.monthlyPayment/(this.monthlyRate/(1-(1+this.monthlyRate)**(-12*t)));e[t]=100*Math.round(a/100)}return this.loanAmount=e[this.durationYears-1],e},getMaxProperty(){let t=[],e=this.getMaxLoan();this.propertyValue=0;for(let a=0;a<this.maxDurationYears;a++){for(;this.getAcquisitionCost()-this.ownFunds<e[a];)this.propertyValue+=1e3;t[a]=this.propertyValue}return t}};